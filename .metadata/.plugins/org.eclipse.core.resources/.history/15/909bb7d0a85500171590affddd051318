require 'selenium-webdriver'
require 'pry'
class Testoneruby
  @driver=Selenium::WebDriver.for :firefox, {driver_path: "C:\\geckodriver.exe"}
  @driver.navigate.to "http://test.terraserver.com"
  @driver.find_element(:id,'homeSearchBox').send_keys("Pune")
  @driver.find_element(:class,'submitOptionsWrap').click
  puts '>>Going to sleep'
  # puts @driver.find_element(:class,'submitOptionsWrap').inspect
  sleep 12
  puts 'Awake from sleep'
  # puts @driver.find_element(:class,'vivid_plus_enabled').length
  @driver.find_elements(:class,'feature_image')[0].click # enhanced element click
  sleep 5
  @driver.find_element(:id,'purchaseOptionButton').click
  @driver.find_element(:id,'order_item_size_1358_x_1018px').click
  sleep 5 
  @driver.find_element(:id,'digitalBuyNow').click
  @driver.find_element(:link_text,'Checkout').click
  
  
  # automate form
  @driver.find_element(:id,'last_name').send_keys('shubham')
  @driver.find_element(:id,'first_name').send_keys('Sh')
  @driver.find_element(:id,'card_number').send_keys('4111111111111111') 
  puts '1'
  @driver.find_element(:id,'cvv').send_keys('123')
  puts '2'
  sleep 5
  @driver.find_element(:name,'user_email').send_keys('abssssc@gmail.com') 
  puts '3'
  puts '4'
  @driver.find_element(:id,'address_city').send_keys('asd')
  puts '5'
  @driver.find_element(:id,'address_postal_code').send_keys('123895')
  puts '6'
  @driver.find_element(:id,'address_address1').send_keys('123')
  puts 'ADDRESS'
  @driver.find_element(:id,'countrySelectList').send_keys('AF')
  sleep 5
  puts '7'
  @driver.find_element(:id,'address_state').send_keys('ashdfsd')
  puts '8'
  #dropDownMenu = @driver.find_element(:name,'expiry_month')
  #options = dropDownMenu.find_elements(tag_name: 'expiry_month')
  #options.each { |option| option.click if option.text == '03' }
  
  mySelect = webdriver.find_element(:id,"expiry_month")
  option = mySelect.find_element(:title, "08")
  option.click
  
  sleep 5
  puts '9'
  mySelect = webdriver.find_element(:id,"expiry_year")
  option = mySelect.find_element(:title, "2018")
  option.click
  
  #dropDownMenus = @driver.find_element(:name,'expiry_year')
  #options = dropDownMenus.find_elements(tag_name: 'expiry_year')
  #options.each { |option| option.click if option.text == '2019' } 
  puts '10'
  @driver.find_element(:id,'term_conditions').click()
  puts '11'
  @driver.find_element(:id,'submitBtn').click()
  puts"Test pass"
end